{% extends 'base.html' %} {% block content %}
<h2 class="mb-4">Gestão de Equipamentos</h2>

<div class="card mb-4">
  <div class="card-body">
    <h5 class="card-title">Adicionar Novo Equipamento</h5>
    <form method="POST" action="{{ url_for('gerenciar_equipamentos') }}">
      <div class="form-row">
        <div class="form-group col-md-5">
          <label for="modelo">Modelo</label>
          <input type="text" class="form-control" name="modelo" required />
        </div>
        <div class="form-group col-md-5">
          <label for="loja">Loja</label>
          <input type="text" class="form-control" name="loja" required />
        </div>
        <div class="form-group col-md-2">
          <label>&nbsp;</label>
          <button type="submit" class="btn btn-primary btn-block">
            Adicionar
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<h3>Equipamentos Cadastrados</h3>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Modelo</th>
      <th>Loja</th>
      <th>Status</th>
      <th>Criado Por</th>
      <th>Data</th>
      <th class="text-center">Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for equipamento in equipamentos %}
    <tr>
      <td>{{ equipamento.id }}</td>
      <td>{{ equipamento.modelo }}</td>
      <td>{{ equipamento.loja }}</td>
      <td>{{ equipamento.status.value }}</td>
      <td>{{ equipamento.criador.username }}</td>
      <td>{{ equipamento.data_criacao.strftime('%d/%m/%Y %H:%M') }}</td>
      <td class="text-center">
        <a
          href="{{ url_for('editar_equipamento', id=equipamento.id) }}"
          class="btn btn-warning btn-sm"
          >Editar</a
        >
        <form
          method="POST"
          action="{{ url_for('apagar_equipamento', id=equipamento.id) }}"
          style="display: inline"
        >
          <button
            type="submit"
            class="btn btn-danger btn-sm"
            onclick="return confirm('Tem certeza que deseja apagar este equipamento? Esta ação não pode ser desfeita.')"
          >
            Apagar
          </button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr>
      <td colspan="7" class="text-center">Nenhum equipamento cadastrado.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
